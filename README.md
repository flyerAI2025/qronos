## æœ¬ç³»ç»Ÿè‘—ä½œç”±[ã€Šé‚¢ä¸è¡Œ-é‡åŒ–å°è®²å ‚ã€‹](https://www.quantclass.cn/home)é¢†å¯¼ï¼Œä¸“é—¨é’ˆå¯¹åˆ†äº«ä¼šæˆå‘˜å®šåˆ¶åŒ–æœåŠ¡è€Œæ¥

## æœ¬ç³»ç»Ÿå®Œå…¨å¼€æºï¼Œè¯·åœ¨ä½¿ç”¨ç³»ç»Ÿå‰ä»”ç»†å®¡è®¡æ¡†æ¶ä»£ç 

## æœ¬ç³»ç»Ÿä¸åŒ…å«ä»»ä½•éšè—åé—¨ç¨‹åº

## æœ¬ç³»ç»Ÿæ‰€æœ‰æ•°æ®ç¼“å­˜åœ¨éƒ¨ç½²ç”µè„‘çš„ç£ç›˜ä¸Š

## æœ¬ç³»ç»Ÿä¸ä¼šä¼ è¾“ä»»ä½•å®ç›˜ç›¸å…³ä¿¡æ¯ç»™å½©è™¹å®˜æ–¹æˆ–å…¶ä»–æœºæ„

## æœ¬ç³»ç»ŸæŒç»­æ›´æ–°ä¸­Â·Â·Â·

## æœ¬ç³»ç»Ÿæ¯æ¬¡æ›´æ–°ç‰ˆæœ¬ï¼Œä¼šæ›´æ–°`code.txt`å†…å®¹ï¼Œä½¿ç”¨ç³»ç»Ÿéœ€è¦é‡æ–°éªŒè¯

## å¦‚æœå·²ç¡®è®¤ä»¥ä¸Šä¿¡æ¯ï¼Œè¯·åœ¨ç³»ç»Ÿä¸­è¾“å…¥ä»£ç ç›®å½•ä¸‹`code.txt`æ–‡æœ¬ä¸­å†…å®¹è¿›è¡ŒéªŒè¯ï¼Œè¡¨æ˜ä½ å·²çŸ¥æ™“ä¸Šè¿°å†…å®¹

---

## ğŸ“œ License / è®¸å¯è¯

**English:**  
This project is licensed under the **MIT Non-Commercial Attribution License (MIT-NC-Attr)**.  
- âœ… Free for personal, educational, and research use.  
- ğŸš« Commercial use is prohibited without prior written permission.  
- ğŸ“Œ Forks or derivative works must include clear attribution and a link to the original repository.  

See [LICENSE](./LICENSE) for full details.

**ä¸­æ–‡è¯´æ˜:**  
æœ¬é¡¹ç›®é‡‡ç”¨ **MIT éå•†ä¸šç½²åè®¸å¯è¯ (MIT-NC-Attr)**ã€‚  
- âœ… å…è®¸ä¸ªäººã€æ•™è‚²ã€ç ”ç©¶ç­‰éå•†ä¸šç”¨é€”å…è´¹ä½¿ç”¨ã€‚  
- ğŸš« æœªç»ä¹¦é¢è®¸å¯ï¼Œç¦æ­¢ä»»ä½•å•†ä¸šç”¨é€”ã€‚  
- ğŸ“Œ Fork æˆ–è¡ç”Ÿé¡¹ç›®å¿…é¡»æ¸…æ™°æ ‡æ³¨åŸä½œè€…åŠé¡¹ç›®åœ°å€ï¼Œå¹¶é™„ä¸ŠåŸä»“åº“é“¾æ¥ã€‚  

å®Œæ•´æ¡æ¬¾è¯·æŸ¥çœ‹ [LICENSE](./LICENSE)ã€‚

---

# Qronos é‡åŒ–äº¤æ˜“æ¡†æ¶ç®¡ç†ç³»ç»Ÿ

> ğŸš€ ä¸“ä¸šçš„é‡åŒ–äº¤æ˜“æ¡†æ¶ç®¡ç†å¹³å°ï¼Œæ”¯æŒå¤šæ¶æ„Dockeréƒ¨ç½²

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

Qronos æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„é‡åŒ–äº¤æ˜“æ¡†æ¶ç®¡ç†ç³»ç»Ÿï¼Œæä¾›ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š

- ğŸ”’ **å®‰å…¨è®¤è¯**ï¼šGoogle Authenticator 2FA + JWT Token åŒé‡è®¤è¯
- ğŸ“¦ **æ¡†æ¶ç®¡ç†**ï¼šè‡ªåŠ¨ä¸‹è½½ã€éƒ¨ç½²å’Œç®¡ç†é‡åŒ–äº¤æ˜“æ¡†æ¶
- ğŸ›ï¸ **é…ç½®ç®¡ç†**ï¼šå¯è§†åŒ–é…ç½®æ•°æ®ä¸­å¿ƒå’Œç­–ç•¥å‚æ•°
- ğŸ“Š **çŠ¶æ€ç›‘æ§**ï¼šå®æ—¶ç›‘æ§æ¡†æ¶è¿è¡ŒçŠ¶æ€å’Œæ—¥å¿—
- ğŸ³ **å®¹å™¨åŒ–éƒ¨ç½²**ï¼šæ”¯æŒ Docker å¤šæ¶æ„éƒ¨ç½²ï¼ˆAMD64/ARM64ï¼‰

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **åç«¯**: Python 3.11 + FastAPI + SQLAlchemy
- **å‰ç«¯**: Vue.js + Element-UI
- **æ•°æ®åº“**: SQLite
- **å®¹å™¨**: Docker + Nginx + PM2
- **è®¤è¯**: Google Authenticator + JWT

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒè¦æ±‚

- Python 3.11+
- Docker Desktop (æ”¯æŒ Buildx)
- Node.js 20+ (ç”¨äºå‰ç«¯æ„å»º)

### 2. æœ¬åœ°å¼€å‘

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd qronos

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
python main.py
```

## ğŸ³ Docker æ„å»ºä¸å‘å¸ƒ

### æ„å»ºè„šæœ¬è¯´æ˜

é¡¹ç›®æä¾›ä¸¤ä¸ªä¸»è¦çš„æ„å»ºè„šæœ¬ï¼š

| è„šæœ¬ | ç”¨é€” | ç‰¹ç‚¹ |
|------|------|------|
| `build-multiarch-fast.sh` | é«˜æ€§èƒ½æ„å»º | å¤šçº§ç¼“å­˜ã€è‡ªåŠ¨ä¼˜åŒ–ã€æ•…éšœæ¢å¤ |

### æ„å»ºå‘½ä»¤

#### å¿«é€Ÿæ„å»ºï¼ˆæ¨èï¼‰

```bash
# æ ‡å‡†æ¨¡å¼ - å¹³è¡¡é€Ÿåº¦å’Œç¨³å®šæ€§
./scripts/build-multiarch-fast.sh [ç”¨æˆ·å] [ç‰ˆæœ¬å·]

# ç¤ºä¾‹
./scripts/build-multiarch-fast.sh myuser v1.0.0
```

#### é«˜æ€§èƒ½æ„å»º

```bash
# ç§¯æç¼“å­˜æ¨¡å¼ - æœ€å¿«æ„å»ºé€Ÿåº¦
./scripts/build-multiarch-fast.sh myuser v1.0.0 aggressive

# ç¦»çº¿æ¨¡å¼ - æ— ç½‘ç»œä¾èµ–
./scripts/build-multiarch-fast.sh myuser v1.0.0 offline
```

### å‚æ•°è¯´æ˜

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `ç”¨æˆ·å` | Docker Hub ç”¨æˆ·å | `xbxtempleton` |
| `ç‰ˆæœ¬å·` | é•œåƒç‰ˆæœ¬æ ‡ç­¾ | æ—¶é—´æˆ³ |
| `ç¼“å­˜æ¨¡å¼` | `normal`/`aggressive`/`offline` | `normal` |
| `Dockerfile` | æŒ‡å®š Dockerfile æ–‡ä»¶ | `Dockerfile` |

## ğŸ“‹ å®Œæ•´å‘å¸ƒæµç¨‹

### 1. å‡†å¤‡é˜¶æ®µ

```bash
# æ£€æŸ¥Dockerç¯å¢ƒ
docker --version
docker buildx version

# ç™»å½•Docker Hub
docker login

# æ£€æŸ¥é¡¹ç›®çŠ¶æ€
git status
```

### 2. æ„å»ºé•œåƒ

```bash
# å¿«é€Ÿæ„å»ºï¼ˆæ¨èï¼‰
./scripts/build-multiarch-fast.sh myuser v1.0.0 aggressive
```

### 3. éªŒè¯æ„å»º

```bash
# æ£€æŸ¥é•œåƒ
docker manifest inspect myuser/qronos-trading-framework:v1.0.0

# æœ¬åœ°æµ‹è¯•
docker run --rm -p 8080:80 myuser/qronos-trading-framework:v1.0.0
```

### 4. ç”Ÿäº§éƒ¨ç½²

```bash
# ä¸€é”®éƒ¨ç½²è„šæœ¬ï¼ˆè‡ªåŠ¨å®‰è£…Docker + éƒ¨ç½²æ¡†æ¶ï¼‰
./scripts/deploy-qronos.sh

# æˆ–æŒ‡å®šå‚æ•°
./scripts/deploy-qronos.sh myuser/qronos v1.0.0 qronos-app --docker-mirror china

# è‡ªåŠ¨é…ç½®è™šæ‹Ÿå†…å­˜ï¼ˆæ¨èç”¨äºå°å†…å­˜æœåŠ¡å™¨ï¼‰
./scripts/deploy-qronos.sh --auto-setup-swap

# è·³è¿‡å†…å­˜æ£€æŸ¥
./scripts/deploy-qronos.sh --skip-swap-check
```

### 5. å†…å­˜é…ç½®ä¼˜åŒ–

å¯¹äºå†…å­˜è¾ƒå°çš„æœåŠ¡å™¨ï¼ˆå¦‚2æ ¸4Gï¼‰ï¼Œå»ºè®®é…ç½®è™šæ‹Ÿå†…å­˜æ¥é¿å…é‡åŒ–æ¡†æ¶è¿è¡Œæ—¶çš„å†…å­˜æº¢å‡ºï¼š

```bash
# è‡ªåŠ¨é…ç½®è™šæ‹Ÿå†…å­˜ï¼ˆæ¨èï¼‰
./scripts/deploy-qronos.sh --auto-setup-swap

# æˆ–é€šè¿‡éƒ¨ç½²è„šæœ¬è‡ªåŠ¨é…ç½®
./scripts/deploy-qronos.sh --auto-setup-swap

# æ£€æŸ¥å†…å­˜çŠ¶æ€
free -h
```

**å†…å­˜é…ç½®å»ºè®®ï¼š**
- 2GBç‰©ç†å†…å­˜ï¼šå»ºè®®é…ç½®6GBè™šæ‹Ÿå†…å­˜
- 4GBç‰©ç†å†…å­˜ï¼šå»ºè®®é…ç½®4GBè™šæ‹Ÿå†…å­˜  
- 8GBä»¥ä¸Šï¼šé€šå¸¸æ— éœ€é¢å¤–è™šæ‹Ÿå†…å­˜

**æ³¨æ„äº‹é¡¹ï¼š**
- è™šæ‹Ÿå†…å­˜éœ€è¦åœ¨å®¿ä¸»æœºä¸Šé…ç½®ï¼Œä¸æ˜¯åœ¨å®¹å™¨å†…
- è™šæ‹Ÿå†…å­˜ä¼šå ç”¨ç£ç›˜ç©ºé—´ï¼Œç¡®ä¿æœ‰è¶³å¤Ÿå­˜å‚¨
- è™½ç„¶è™šæ‹Ÿå†…å­˜å¯ä»¥ç¼“è§£å†…å­˜ä¸è¶³ï¼Œä½†ä¼šå½±å“æ€§èƒ½

## ğŸ”§ æ„å»ºä¼˜åŒ–

### macOS ä¼˜åŒ–å»ºè®®

1. **Docker Desktop é…ç½®**
   - å†…å­˜: 8GB+
   - CPU: 4æ ¸+
   - ç£ç›˜: 64GB+

2. **å¯ç”¨å®éªŒæ€§åŠŸèƒ½**
   - VirtioFS åŠ é€Ÿç›®å½•å…±äº«
   - containerd é•œåƒå­˜å‚¨

3. **Apple Silicon (M1/M2) ç”¨æˆ·**
   ```bash
   # è‡ªåŠ¨ä¼˜åŒ–åŸç”Ÿæ¶æ„
   ./scripts/build-multiarch-fast.sh myuser v1.0.0 aggressive auto
   ```

### æ€§èƒ½å¯¹æ¯”

| æ„å»ºæ–¹å¼ | é¦–æ¬¡æ„å»º | å¢é‡æ„å»º | ç¼“å­˜å‘½ä¸­ç‡ |
|----------|----------|----------|------------|
| æ ‡å‡†æ„å»º | 15-20åˆ†é’Ÿ | 8-12åˆ†é’Ÿ | 30-40% |
| ä¼˜åŒ–æ„å»º | 8-12åˆ†é’Ÿ | 3-5åˆ†é’Ÿ | 60-70% |
| ç§¯æç¼“å­˜ | 5-8åˆ†é’Ÿ | 1-3åˆ†é’Ÿ | 80-90% |

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ„å»ºå¤±è´¥**
   ```bash
   # æ¸…ç†ç¼“å­˜é‡è¯•
   docker builder prune --all
   ```

2. **ç½‘ç»œé—®é¢˜**
   ```bash
   # ä½¿ç”¨ç¦»çº¿æ¨¡å¼
   ./scripts/build-multiarch-fast.sh myuser v1.0.0 offline
   ```

3. **æƒé™é—®é¢˜**
   ```bash
   # æ£€æŸ¥Dockerç™»å½•çŠ¶æ€
   docker info | grep Username
   
   # é‡æ–°ç™»å½•
   docker login
   ```

4. **å†…å­˜ä¸è¶³é—®é¢˜** â­
   ```bash
   # æ£€æŸ¥å†…å­˜çŠ¶æ€
   free -h
   
   # é…ç½®è™šæ‹Ÿå†…å­˜ï¼ˆæ¨èä½¿ç”¨éƒ¨ç½²è„šæœ¬ï¼‰
   ./scripts/deploy-qronos.sh --auto-setup-swap
   
   # æ‰‹åŠ¨é…ç½®è™šæ‹Ÿå†…å­˜
   sudo fallocate -l 4G /swapfile
   sudo chmod 600 /swapfile
   sudo mkswap /swapfile
   sudo swapon /swapfile
   echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab
   
   # ç›‘æ§å†…å­˜ä½¿ç”¨
   docker stats qronos-app
   ```

5. **é‡åŒ–æ¡†æ¶å†…å­˜æº¢å‡º**
   ```bash
   # æ£€æŸ¥å®¹å™¨å†…å­˜é™åˆ¶
   docker stats <å®¹å™¨å>
   
   # ä¸ºå®¹å™¨è®¾ç½®åˆé€‚çš„å†…å­˜é™åˆ¶
   docker run --memory=6g <é•œåƒå>
   
   # æ£€æŸ¥æ¡†æ¶æ—¥å¿—
   docker logs <å®¹å™¨å> | grep -i "memory\|oom"
   
   # ä¼˜åŒ–æ¡†æ¶é…ç½®ï¼ˆå‡å°‘å¹¶å‘æ•°ã€ç¼“å­˜å¤§å°ç­‰ï¼‰
   ```

### è°ƒè¯•æŠ€å·§

```bash
# æŸ¥çœ‹æ„å»ºæ—¥å¿—
./scripts/build-multiarch-fast.sh myuser debug > build.log 2>&1

# å•ç‹¬æ„å»ºç‰¹å®šæ¶æ„
docker buildx build --platform linux/amd64 --tag myuser/qronos:amd64 .

# æ£€æŸ¥é•œåƒå±‚ä¿¡æ¯
docker history myuser/qronos-trading-framework:latest

# æŸ¥çœ‹ç³»ç»Ÿèµ„æºä½¿ç”¨
htop
iostat -x 1
```

## ğŸ“Š é¡¹ç›®ç»“æ„

```
qronos/
â”œâ”€â”€ ğŸ“ config.py              # é…ç½®æ–‡ä»¶
â”œâ”€â”€ ğŸ“ data/                  # æ•°æ®å­˜å‚¨ç›®å½•
â”œâ”€â”€ ğŸ“ db/                    # æ•°æ®åº“æ¨¡å—
â”œâ”€â”€ ğŸ“ docker/                # Dockeré…ç½®æ–‡ä»¶
â”œâ”€â”€ ğŸ“ frontend/              # å‰ç«¯ä»£ç 
â”œâ”€â”€ ğŸ“ model/                 # æ•°æ®æ¨¡å‹
â”œâ”€â”€ ğŸ“ scripts/               # æ„å»ºå’Œç®¡ç†è„šæœ¬
â”‚   â”œâ”€â”€ ğŸš€ deploy-qronos.sh  # ä¸€é”®éƒ¨ç½²è„šæœ¬ï¼ˆå«å†…å­˜é…ç½®ï¼‰
â”œâ”€â”€ ğŸ“ service/               # ä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ ğŸ“ utils/                 # å·¥å…·æ¨¡å—
â”œâ”€â”€ ğŸ³ Dockerfile             # æ ‡å‡†Dockeræ–‡ä»¶
â”œâ”€â”€ ğŸ³ Dockerfile.multiarch   # å¤šé˜¶æ®µä¼˜åŒ–ç‰ˆæœ¬
â”œâ”€â”€ ğŸ main.py               # ä¸»ç¨‹åºå…¥å£
â””â”€â”€ ğŸ“‹ requirements.txt       # Pythonä¾èµ–
```

## ğŸ› ï¸ ç®¡ç†å·¥å…·

éƒ¨ç½²è„šæœ¬ `deploy-qronos.sh` ç°å·²é›†æˆå†…å­˜é…ç½®å’Œç›‘æ§åŠŸèƒ½ï¼š

```bash
# é¦–æ¬¡éƒ¨ç½²ï¼ˆè‡ªåŠ¨é…ç½®å†…å­˜ï¼‰
./scripts/deploy-qronos.sh --auto-setup-swap

# è·³è¿‡å†…å­˜æ£€æŸ¥
./scripts/deploy-qronos.sh --skip-swap-check

# æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯
./scripts/deploy-qronos.sh --help
```

---